
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ECMAScript 6 at Fluent Conf</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=d03024f356">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">

    <link rel="canonical" href="http://138.68.15.179/ecmascript-6-at-fluent-conf/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="http://138.68.15.179/ecmascript-6-at-fluent-conf/amp/">
    
    <meta property="og:site_name" content="Theoretical Ideations">
    <meta property="og:type" content="article">
    <meta property="og:title" content="ECMAScript 6 at Fluent Conf">
    <meta property="og:description" content="Last week, I attended Fluent Conf, a web conference in San Francisco. It was a really good conference overall, much better than I was expecting. It's still not as good as JSConf, but it was still very much worth my time. This post, and two latter posts, summarize everything I">
    <meta property="og:url" content="http://138.68.15.179/ecmascript-6-at-fluent-conf/">
    <meta property="article:published_time" content="2014-03-19T00:58:11.000Z">
    <meta property="article:modified_time" content="2014-03-19T01:01:19.000Z">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="ECMAScript 6 at Fluent Conf">
    <meta name="twitter:description" content="Last week, I attended Fluent Conf, a web conference in San Francisco. It was a really good conference overall, much better than I was expecting. It's still not as good as JSConf, but it was still very much worth my time. This post, and two latter posts, summarize everything I">
    <meta name="twitter:url" content="http://138.68.15.179/ecmascript-6-at-fluent-conf/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Bryan Hughes">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Theoretical Ideations",
        "logo": "http://138.68.15.179/ghost/img/ghosticon.jpg"
    },
    "author": {
        "@type": "Person",
        "name": "Bryan Hughes",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/b2c8ee28e90a3e97ba056d444114bb06?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "http://138.68.15.179/author/bryan-hughes/",
        "sameAs": [
            "https://github.com/bryan-m-hughes"
        ],
        "description": "I&#x27;m a web framework dev at Rdio and love JavaScript! I&#x27;m also an amateur photographer, avid gamer, film enthusiast, wine lover, and very lucky husband!"
    },
    "headline": "ECMAScript 6 at Fluent Conf",
    "url": "http://138.68.15.179/ecmascript-6-at-fluent-conf/",
    "datePublished": "2014-03-19T00:58:11.000Z",
    "dateModified": "2014-03-19T01:01:19.000Z",
    "description": "Last week, I attended Fluent Conf, a web conference in San Francisco. It was a really good conference overall, much better than I was expecting. It&#x27;s still not as good as JSConf, but it was still very much worth my time. This post, and two latter posts, summarize everything I",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://138.68.15.179"
    }
}
    </script>

    <meta name="generator" content="Ghost 0.11">
    <link rel="alternate" type="application/rss+xml" title="Theoretical Ideations" href="http://138.68.15.179/rss/">
</head>
<body class="post-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-home" role="presentation"><a href="http://138.68.15.179/">Home</a></li>
    </ul>
        <a class="subscribe-button icon-feed" href="http://138.68.15.179/rss/">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post">

        <header class="post-header">
            <h1 class="post-title">ECMAScript 6 at Fluent Conf</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2014-03-18">18 March 2014</time> 
            </section>
        </header>

        <section class="post-content">
            <p>Last week, I attended Fluent Conf, a web conference in San Francisco. It was a really good conference overall, much better than I was expecting. It's still not as good as <a href="https://theoreticalideations.com/2013/06/03/jsconf-2013-was-amazing/">JSConf</a>, but it was still very much worth my time. This post, and two latter posts, summarize everything I learned at the conference.</p>

<p>I've been following the development of ECMAScript 6 for some time and am really excited for many of the new feaures. Getting a new language created, implemented, and adopted is no easy feat. Until now, I felt like most of the talk was focused on "won't it be cool when we can do this some magical day in the future." Not so at Fluent though. I feel like there is starting to be real, practical interest in ECMAScript 6, as if we are just starting to crest the wave from academic to practical.</p>

<h2 id="practicalworkflowsfores6modules">Practical Workflows for ES6 Modules</h2>

<h3 id="guybedfordguybedfordhttpstwittercomguybedford">Guy Bedford <a href="https://twitter.com/guybedford">@guybedford</a></h3>

<p>ECMAScript 6 includes a new <a href="http://wiki.ecmascript.org/doku.php?id=harmony:modules">module specification</a> and <a href="http://wiki.ecmascript.org/doku.php?id=harmony:module_loaders">loader specification</a>.</p>

<p>The module spec specifies the syntax for defining modules in JavaScript. Importing is pretty straightforward, and looks kinda sorta Python-ish:</p>

<pre><code class="language-JavaScript">import { encrypt, decrypt } from "crypto";  
</code></pre>

<p>These may look synchronous, but they are actually asynchronous. imports must go at the top of files, so you can think of this as lots of syntactic sugar around AMD <code>define()</code>'s</p>

<p>Exporting is pretty CommonJS-ish:</p>

<pre><code>module "foo" {  
    export let x = 42;
}
</code></pre>

<p>The loader spec is in charge of figuring out how to load the modules. The most awesome part is that it's extensible. The spec isn't very formal yet, mostly just a description of Mozilla's prototype implementation. The loader spec allows you to specify your own mechanisms for resolving names, fetching the code, etc. You can, for example, extend it to use SPDY/HTTP2 or your own custom bundling tech if you want.</p>

<p><a href="https://github.com/google/traceur-compiler">Traceur</a> has support for modules, and 
<a href="https://github.com/systemjs/systemjs">SystemJS</a> has support for the loader, if you want to play around with it today.</p>

<h2 id="technicalandsocialprogresstowardecmascript6atfacebook">technical and social progress toward ECMAScript 6 at facebook</h2>

<h3 id="bennewmanbenjamnhttpstwittercombenjamn">Ben Newman, <a href="https://twitter.com/benjamn">@benjamn</a></h3>

<p>Ben started his talk with a bit of a story about the title (notice the capitalization). He mentioned a fun site called <a href="https://theoreticalideations.com/ecmascript-6-at-fluent-conf/titlecapitalization.com">Title Capitalization</a> and used it as an example of how technology can make old problems obsolete (cue foreshadowing).</p>

<p>Programming languages are notoriously difficult to “fix forward”, and we have to look no further than the (largely failed thus far) Python 2 to Python 3 transition. Python 3 is 5 years old, but hardly anyone uses it, instead preferring to stick to Python 2. The key question for us in the JavaScript community is: how do we avoid the Python 3 trap with ECMAScript 6 and later?</p>

<p>Ben's proposed solution to this problem is to incrementally start adding the most useful features into existing code and JavaScript runtimes. To achieve this, Ben implemented a tool called <a href="https://github.com/benjamn/recast">recast</a> that makes it really easy to rewrite JavaScript ASTs (recast is based on <a href="https://github.com/ariya/esprima">Esprima</a>). As an example:</p>

<pre><code class="language-JavaScript">[3, 1, 10, 28].sort((a, b) =&gt; a - b);
</code></pre>

<p>is transformed into</p>

<pre><code class="language-JavaScript">[3, 1, 10, 28].sort(function (a, b) {
  return a - b;
}.bind(this));
</code></pre>

<p>Ben's original plan for the Facebook codebase was to implement a set of jslint rules that would warn developers when they tried to do things the "old" way and give them a link to a wiki explaining how to write things the ES6 way. He ended up not taking this approach because:</p>

<ul>
<li>jslint tells you code <em>might</em> be bad <em>after</em> it’s written</li>
<li>No one reads wikis</li>
<li>Ben didn’t want to make educating thousands of Facebook engineers his full-time job</li>
<li>As long as old style code dominated the codebase, it would continue to dominate</li>
</ul>

<p>Ben decided that it was better to write a set of tools that would automatically convert the old ES5 style of code to ES6 code. He came up with the following requirements for the tool:</p>

<ul>
<li>Support multiple idioms
<ul><li>Facebook has a few ways of creating web components, and they all needed to be supported</li>
<li>The old, custom libraries for creating classes was converted to the new ES6 class spec</li></ul></li>
<li>The output code must be human readable</li>
<li>The output code must also be human reviewable</li>
<li>The output code must ultimately look like it was written by a human
<ul><li>This means maintaining comments, etc</li></ul></li>
</ul>

<p>Ben ran his script on the Facebook codebase with the following results:</p>

<ul>
<li>changed 1647 files</li>
<li>~75000 insertions and deletions</li>
<li>1658 classes converted
<ul><li>There are about 3000 classes exist today</li>
<li>This means half were human written after the switch</li></ul></li>
</ul>

<p>Lessons learned:</p>

<ul>
<li>Output must be human readable</li>
<li>Tool should be very conservative
<ul><li>If the tool doesn’t know what to do, fail hard, don't guess</li></ul></li>
<li>Iterate rapidly, handling more and more rare cases</li>
<li>How you hand-fix edge cases must be done with care with regards to diffs/overwriting from subsequent runs of the tool</li>
<li>The tool must be idempotent</li>
<li>Use GNU parallel to parallelize script</li>
<li>Humans have right of way
<ul><li>The tool can be rerun easily, diffs created by hand not so much</li></ul></li>
<li>Identify the stake holders, and convert whole functional units of code at once</li>
<li>Set intermediate milestones</li>
<li>New code mimics existing code</li>
<li>The future is longer than the past</li>
</ul>

<h2 id="callableentitiesinecmascript6">Callable Entities in ECMAScript 6</h2>

<h3 id="draxelrauschmayer">Dr. Axel Rauschmayer</h3>

<p>Unfortunately I encountered a sync error with Evernote and lost my notes for this talk. It wasn't a very good talk, so I'm not too dissapointed.</p>

<p>There was one good point from it though: the overloaded use of functions in JavaScript. Functions serve triple duty in JavaScript (as a function, as a method, and as a constructor), and it's because functions are trying to do three things at once that we run into problems (calling a constructor as a function, issues with <code>this</code>, etc).</p>

<p>ECMAScript 6 addresses most of these issues with the new support for true classes and arrow functions.</p>

<h2 id="everythingisapolyfillautomatedeletingcodeforfrontendperformance">Everything is a Polyfill: Automate Deleting Code for Frontend Performance</h2>

<h3 id="rachelmyersrachelmyershttptwittercomrachelmyersandemilynakashimaeanakashimahttptwittercomeanakashima">Rachel Myers <a href="http://twitter.com/rachelmyers">@rachelmyers</a> and Emily Nakashima <a href="http://twitter.com/eanakashima">@eanakashima</a></h3>

<p>At it's core, the primary thesis of this talk is that polyfills should be created with an expiration date.</p>

<p>To set the stage, let's consider an all-to-common scenario:</p>

<p>Alice: "We need to use Array.indexOf but IE8 doesn't support it. What should we do?" <br>
Bob: "Create a polyfill by modifying the Array prototype of course" <br>
Alice: "OK, I wrote the polyfill and added it to our codebase. Let's make sure we remember to remove it once we drop IE8 support" <br>
Bob: "There's no way I would forget, it will be downright <em>cathartic</em> removing all the IE8 code"</p>

<p>A year goes by and IE8 support is dropped</p>

<p>Alice: "No more IE8, yay!" <br>
Bob: "Good riddance!"</p>

<p>Another year goes by</p>

<p>Bob: "Hey Alice, what's this indexOf polyfill doing here?" <br>
Alice: "I vaguely remember something about it from, like, 2 years ago." <br>
Bob: "Well, can we remove it?" <br>
Alice: "I dunno. We'll have to do an investigation into our codebase to see where it's being used and how and cross-reference it with what all of our supported browsers provide" <br>
Bob: "That sounds like a lot of work. Let's go get beer instead" <br>
Alice: "Beer it is!"</p>

<p>To avoid this common trap, a more methodical approach to polyfills is necessary. How do we do that though?</p>

<ul>
<li>Add some comments to the code explaining the nature of the polyfill and when it's safe to delete that
<ul><li>This requires that developers comment their code reliably...yeah, about that...</li></ul></li>
<li>Use Modernizr or a custom mechanism based on Require.js
<ul><li>Better, but causes unecessary overhead</li>
<li>You either have to Load All the Polyfills!, or do detection and request individual polyfills from the server</li>
<li>Both techniques have a network cost</li></ul></li>
</ul>

<p>Instead, the authors recommend creating a hard coded set of polyfills that are closely tied to an expiration system integrated with your continuous integration setup.</p>

<p>Browser support is defined in a machine parseable format with expiration dates:</p>

<pre><code class="language-JSON">{
    "IE": {
        "8": 1404254609391,
        "9": 1417477409391,
        ...
}
</code></pre>

<p>Polyfills can then be defined like:</p>

<pre><code class="language-JavaScript">var polyfills = [{  
    nativeSupport: {
        IE: 9
        ...
    },
    code: function () {
        if (!Array.prototype.indexOf) {
            ...
        }
    }
}]
</code></pre>

<p>These polyfills can be passed into a polyfill loader that executes them. What's advantageous about this setup is that support is explicitly codified and completely unambiguous. Even more, this setup can be integrated into your unit testing infrastructure so that they are brought to everyones attention as soon as they expire.</p>

<p>In addition to the technical advantages, there is also a major non-technical advantage: it forces devs to work with product management to determine exactly what the project's supported browsers are. It also forces devs and product management to keep this list up to date.</p>

<p>This type of polyfill infrastructure can be extended to HTML and CSS as well with the use of code analysis scripts that, for example, automatically detect vendor prefixed CSS rules and compares them against their supported browsers vs. expiration dates.</p>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../author/bryan-hughes/" style="background-image: url(https://www.gravatar.com/avatar/b2c8ee28e90a3e97ba056d444114bb06?s&amp;)"><span class="hidden">Bryan Hughes's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../author/bryan-hughes/">Bryan Hughes</a></h4>

                    <p>I'm a web framework dev at Rdio and love JavaScript! I'm also an amateur photographer, avid gamer, film enthusiast, wine lover, and very lucky husband!</p>
                <div class="author-meta">
                    <span class="author-location icon-location">San Francisco, CA</span>
                    <span class="author-link icon-link"><a href="https://github.com/bryan-m-hughes">https://github.com/bryan-m-hughes</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=ECMAScript%206%20at%20Fluent%20Conf&amp;url=http://138.68.15.179/ecmascript-6-at-fluent-conf/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://138.68.15.179/ecmascript-6-at-fluent-conf/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://138.68.15.179/ecmascript-6-at-fluent-conf/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


        </footer>

    </article>
</main>

<aside class="read-next">
    <a class="read-next-story no-cover" href="../fluent-conf-javascript-performance/">
        <section class="post">
            <h2>JavaScript Performance at Fluent Conf</h2>
            <p>There was also a pretty good selection of talks concerning performance at Fluent Conf this year. The Perception of…</p>
        </section>
    </a>
    <a class="read-next-story prev no-cover" href="../rdio-hack-day-project/">
        <section class="post">
            <h2>Rdio Hack Day Project</h2>
            <p>Here at Rdio, we have a hack day event once a quarter. During this event, which lasted two days,…</p>
        </section>
    </a>
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="http://138.68.15.179">Theoretical Ideations</a> © 2018</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=d03024f356"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=d03024f356"></script>

</body>
